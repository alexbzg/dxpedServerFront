<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"                                                
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" land="ru" xml:lang="en" ng-app="dxpApp">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
        <meta http-equiv="Content-Language" content="ru-ru"/>
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <title>R7AB - RDA expedition</title>

        <link rel="icon" href="/favicon.ico" type="image/x-icon">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link href="style.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="angular-bootstrap-lightbox.min.css">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">        
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-sanitize.min.js"></script>
        <script src="ui-bootstrap-tpls-2.5.0.min.js"></script>        
        <script src="angular-bootstrap-lightbox.min.js"></script>        
        <script src="angular-ymaps.min.js"></script>
        <script src="moment.min.js"></script>
        <script src="moment-timezone-with-data-2010-2020.min.js"></script>
        <script src="dxpApp.module.js?version=0.0.0.1"></script>
        <script src="storage.service.js"></script>

</head>
<body>
        <div id="expedition">
            <div id="status" ng-controller="statusController as vm" ng-hide="vm.logEmpty()">
                <span class="grey">
                    <span class="small">{{vm.lastLogEntry().date}}</span> 
                    {{vm.lastLogEntry().time}} &nbsp;&nbsp;&nbsp; 
                    {{vm.lastLogEntry().freq}} {{vm.lastLogEntry().mode}}
                </span><br/>
                <span class="small" ng-show="vm.lastLogEntry().rda">RDA</span> {{vm.lastLogEntry().rda}} &nbsp; 
                <span class="small" ng-show="vm.lastLogEntry().rafa">RAFA</span> {{vm.lastLogEntry().rafa}} 
                &nbsp; {{vm.lastLogEntry().loc}}
            </div>
            <a href="/"><img id="logo" src="/images/r7ab_logo3.jpg" border="0" height="39" width="150"></a><br/>
            {{vm.title}}
        </div>


        <div id="tabs" ng-controller="tabsController as vm">
            <div class="tab" id="tab_news" 
                ng-class="{active_tab: vm.active() == 'news'}" ng-click="vm.setActive( 'news' )">News</div>
            <div class="tab" id="tab_log" 
                ng-class="{active_tab: vm.active() == 'log'}" ng-click="vm.setActive( 'log' )">Online log</div>
            <div class="tab" id="tab_check" 
                ng-class="{active_tab: vm.active() == 'check'}" ng-click="vm.setActive( 'check' )">Call check</div>
            <div class="tab" id="tab_map"
                ng-class="{active_tab: vm.active() == 'map'}" ng-click="vm.setActive( 'map' )">Map</div>
            <div class="tab" id="tab_adxc"
                ng-class="{active_tab: vm.active() == 'adxcluster'}" ng-click="vm.setActive('adxcluster')">
                ADXcluster
            </div>
            <div class="tab" id="tab_chat"
                ng-class="{active_tab: vm.active() == 'chat'}" ng-click="vm.setActive( 'chat' )">
                Online chat
            </div>
            <div class="tab" id="tab_donate"
                ng-class="{active_tab: vm.active() == 'donate'}" ng-click="vm.setActive( 'donate' )">
                Support us
            </div>
        </div>

        <div id="list" ng-controller="tabsController as vmTabs">
            
            <div id="news" ng-show="vmTabs.active() == 'news'" ng-controller="newsController as vm">
                <div class="date" ng-repeat-start="item in vm.data">{{item.time}}</div>
                <div class="info" ng-repeat-end compile="item.text"></div>               
            </div>
                        

            <div id="weblog" ng-show="vmTabs.active() == 'log'" ng-controller="logController as vm">
                <table id="log">
                    <tr>
                        <td class="mycall" style="border-top:none; border-left: none;">&nbsp;</td>
                        <td class="date head">date</td>
                        <td class="time head">time</td>
                        <td class="band head">band</td>
                        <td class="mode head">mode</td>
                        <td class="urcall head">callsign</td>
                        <td class="rst head">rst/rst</td>
                        <td class="rda head">rda</td>
                        <td class="rafa head">rafa</td>
                        <td class="wff head">wff</td>
                        <td class="locator head">locator</td>
                    </tr>
                    <tr ng-repeat="spot in vm.data">
                        <td class="mycall">{{spot.myCS}}</td>
                        <td class="date">{{spot.date}}</td>
                        <td class="time">{{spot.time}}</td>
                        <td class="band">{{spot.freq}}</td>
                        <td class="mode">{{spot.mode}}</td>
                        <td class="urcall">{{spot.cs}}</td>
                        <td class="rst">{{spot.rcv}}/{{spot.snt}}</td>
                        <td class="rda">{{spot.rda}}</td>
                        <td class="rafa">{{spot.rafa}}</td>
                        <td class="wff">{{spot.wff}}</td>
                        <td class="locator">{{spot.loc}}</td>
                    </tr>
                </table>
            </div>


            <div id="call_check" ng-show="vmTabs.active() == 'check'" ng-controller="checkController as vm">
                <div id="call_check_form">
                    <input type="text" id="input_call" ng-model="vm.cs"/> 
                    <button ng-click="vm.check()">Call check</button>
                </div>
                <table id="log" ng-if="vm.found">
                    <tr>
                        <td class="mycall" style="border-top:none; border-left: none;">&nbsp;</td>
                        <td class="date head">date</td>
                        <td class="time head">time</td>
                        <td class="band head">band</td>
                        <td class="mode head">mode</td>
                        <td class="urcall head">callsign</td>
                        <td class="rst head">rst/rst</td>
                        <td class="rda head">rda</td>
                        <td class="rafa head">rafa</td>
                        <td class="wff head">wff</td>
                        <td class="locator head">locator</td>
                    </tr>
                    <tr ng-repeat="spot in vm.found">
                        <td class="mycall">{{spot.myCS}}</td>
                        <td class="date">{{spot.date}}</td>
                        <td class="time">{{spot.time}}z</td>
                        <td class="band">{{spot.freq}}</td>
                        <td class="mode">{{spot.mode}}</td>
                        <td class="urcall">{{spot.cs}}</td>
                        <td class="rst">{{spot.rst}}</td>
                        <td class="rda">{{spot.rda}}</td>
                        <td class="rafa">{{spot.rafa}}</td>
                        <td class="wff">{{spot.wff}}</td>
                        <td class="locator">{{spot.loc}}</td>
                    </tr>
                </table>
            </div>


            <div id="gps_map" ng-show="vmTabs.active() == 'map'">
                <div id="map" ng-controller="mapController as vm">
                    <yandex-map center="vm.map.center" zoom="vm.map.zoom">
                        <ymap-marker ng-if="vm.data.location" 
                        properties="{balloonContent:vm.data.date + ' ' + vm.data.time}" 
                        coordinates="vm.data.location"></ymap-marker>
                    </yandex-map>
                </div>
                Обновление - каждые 5 минут.
                <!-- --><br/><br/><br/><br/>
                <b>Маршрут экспедиции</b><br/>

                <iframe src="https://www.google.com/maps/d/embed?mid=1ePNGgVf5c1NGAHz8sPmfOKSymls&z=7" width="1100" height="480"></iframe>
                
            </div>
                    


            <div id="cluster" ng-show="vmTabs.active() == 'adxcluster'">
                <table id="cluster" ng-controller="spotsController as vm">
                    <tr ng-repeat="spot in vm.data track by $index">
                        <td class="time">{{spot.time}}z</td>
                        <td class="band">{{spot.freq}}</td>
                        <td class="mode">{{spot.subMode ? spot.subMode : spot.mode}}</td>
                        <td class="call">{{spot.cs}}</td>
                        <td class="text">{{spot.text}}</td>
                        <td class="spotter">{{spot.de}}</td>
                    </tr>
                </table>
                <a href="http://adxcluster.com" target="_blank">adxcluster.com</a>                   
            </div>

 

            <div id="donate" ng-show="vmTabs.active() == 'donate'">
                <div id="sponsor">
                    Спонсоры экспедиции: <b>R7AB &nbsp; R7DX</b>.  <!-- Expedition's sponsors:  
                    <br/>
                    Большое спасибо за финансовую поддержку: &nbsp; <b>RU9SO &nbsp; UA2FF &nbsp; UA3AAJ &nbsp; R1CF &nbsp; RA9CMO &nbsp; </b>+ 2 неизвестных HAM'а. :)<br/>
                    Thank you very much for your financial support: &nbsp; <b>PA1NL &nbsp; DL7VOG</b>. -->
                </div>

                <iframe frameborder="0" allowtransparency="true" scrolling="no" src="https://money.yandex.ru/embed/donate.xml?account=41001249563216&quickpay=donate&payment-type-choice=on&default-sum=&targets=R7AB+RDA+expedition&project-name=R7AB+RDA+expedition&project-site=http%3A%2F%2Fwww.73.ru%2Frda%2F&button-text=01&comment=on&hint=%D0%92%D0%B0%D1%88+%D0%BF%D0%BE%D0%B7%D1%8B%D0%B2%D0%BD%D0%BE%D0%B9+%2B+%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D0%BD%D0%B8%D0%B5+%D0%B4%D0%BB%D1%8F+%D1%8D%D0%BA%D1%81%D0%BF%D0%B5%D0%B4%D0%B8%D1%86%D0%B8%D0%B8&successURL=http%3A%2F%2Fwww.73.ru%2Frda%2F" width="436" height="161"></iframe>

                <div id="ppal">
                    <table>
                        <tr>
                            <td><img src="/images/paypal_logo.jpg"></td>
                            <td>
                                <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
                                    <input type="hidden" name="cmd" value="_s-xclick">
                                    <input type="hidden" name="hosted_button_id" value="DTKTZPEB53RHU">
                                    <input type="image" src="https://www.paypalobjects.com/en_US/RU/i/btn/btn_donateCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                                    <img alt="" border="0" src="https://www.paypalobjects.com/ru_RU/i/scr/pixel.gif" width="1" height="1">
                                </form>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>

            <div id="chat" ng-show="vmTabs.active() == 'chat'" ng-controller="chatController as vm">

                 <table id="message_form">
                    <tr>
                        <td><input type="text" id="your_call" ng-model="vm.cs"/></td>
                        <td><input type="text" id="message_text" ng-model="vm.text"/></td>
                        <td><button ng-click="vm.send()">OK</button></td>
                    </tr>
                    <tr>
                        <td class="note">your callsign</td>
                        <td class="note">your message</td>
                        <td class="note">&nbsp;</td>
                    </tr>
                </table>

                <table id="chat_window">
                    <tr ng-repeat="msg in vm.data" ng-class="{admin: msg.admin}"> 
                        <td class="call">
                            <span class="call">{{msg.cs}}</span><br/>
                            <span class="date_time">{{msg.date}} {{msg.time}}</span>
                        </td>
                        <td class="message">
                            {{msg.text}}
                        </td>
                    </tr>
                </table>
            </div>


        </div>


        <!-- Yandex.Metrika informer --> <a href="https://metrika.yandex.ru/stat/?id=43844459&amp;from=informer" target="_blank" rel="nofollow"><img src="https://informer.yandex.ru/informer/43844459/3_0_FFFFFFFF_EFEFEFFF_0_pageviews" style="width:88px; height:31px; border:0;" alt="Яндекс.Метрика" title="Яндекс.Метрика: данные за сегодня (просмотры, визиты и уникальные посетители)" class="ym-advanced-informer" data-cid="43844459" data-lang="ru" /></a> <!-- /Yandex.Metrika informer --> <!-- Yandex.Metrika counter --> <script type="text/javascript"> (function (d, w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter43844459 = new Ya.Metrika({ id:43844459, clickmap:true, trackLinks:true, accurateTrackBounce:true }); } catch(e) { } }); var n = d.getElementsByTagName("script")[0], s = d.createElement("script"), f = function () { n.parentNode.insertBefore(s, n); }; s.type = "text/javascript"; s.async = true; s.src = "https://mc.yandex.ru/metrika/watch.js"; if (w.opera == "[object Opera]") { d.addEventListener("DOMContentLoaded", f, false); } else { f(); } })(document, window, "yandex_metrika_callbacks"); </script> <noscript><div><img src="https://mc.yandex.ru/watch/43844459" style="position:absolute; left:-9999px;" alt="" /></div></noscript> <!-- /Yandex.Metrika counter -->
    </body>
</html>

